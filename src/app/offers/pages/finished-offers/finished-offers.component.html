<div class="finished-offers-container">
  <div *ngIf="isLoading && finishedOffers.length === 0" class="loading-indicator">
    Cargando ofertas finalizadas...
  </div>

  <div *ngIf="!isLoading && finishedOffers.length === 0" class="no-offers">
    <p>No tienes ofertas finalizadas.</p>
  </div>

  <div *ngFor="let offer of finishedOffers" class="offer-card-finished">
    <div class="offer-header">
      <h2><span class="icon-finished">üèÅ</span> {{ offer.title }} ({{ offer.status }})</h2>
    </div>
    <p class="offer-description-label">Descripci√≥n:</p>
    <p class="offer-description">{{ offer.description }}</p>

    <div class="content-wrapper-finished">
      <div class="selected-proposal-section" *ngIf="selectedProposalByOfferId[offer.id] as selectedProposal">
        <h4>Trabajador Encargado (Propuesta Seleccionada)</h4>
        <div class="worker-card">
          <img
            [src]="selectedProposal.workerAvatar"
            [alt]="selectedProposal.workerName"
            class="worker-photo"
            (error)="handleImageError($event, selectedProposal.workerName)"
          >
          <div class="worker-info">
            <p class="worker-name">{{ selectedProposal.workerName }}</p>
            <p class="worker-message">{{ selectedProposal.message }}</p>
            <p class="worker-price">Presupuesto: S/ {{ selectedProposal.price }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
